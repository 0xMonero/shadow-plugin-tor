<cluster id="vnet" bandwidthdown="10240" bandwidthup="10240" />
<link clusters="vnet vnet" latency="60" jitter="20" packetloss="0.0" />

<plugin id="file" path="~/.shadow/plugins/libshadow-plugin-filetransfer.so" />
<plugin id="tor" path="~/.shadow/plugins/libshadow-plugin-scallion.so" />
<plugin id="snipetor" path="~/.shadow/plugins/libshadow-plugin-snipetor.so" />

<kill time="3600" />

<node id="fileserver" bandwidthdown="102400" bandwidthup="102400" >
    <application plugin="file" time="1" arguments="server 80 ~/.shadow/share/" />
</node >

<node id="4uthority" >
    <application plugin="tor" time="1" arguments="dirauth 1024 1024000 1024000 ./authority.torrc ./data/authoritydata ~/.shadow/share/geoip" />
</node >
<node id="target" quantity="1" heartbeatloginfo="node,ram" loglevel="info" >
    <application plugin="tor" time="60" arguments="relay 1024 1024000 1024000 ./relay.torrc ./data/relaydata ~/.shadow/share/geoip" />
</node>
<node id="exit" quantity="2" >
    <application plugin="tor" time="60" arguments="exitrelay 1024 1024000 1024000 ./exit.torrc ./data/exitdata ~/.shadow/share/geoip" />
</node >
<node id="relay" quantity="2" >
    <application plugin="tor" time="60" arguments="relay 1024 1024000 1024000 ./relay.torrc ./data/relaydata ~/.shadow/share/geoip" />
</node>

<node id="sniper" heartbeatloginfo="node,ram" loglevel="info" >
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8001 9001" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8002 9002 9001" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8003 9003" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8004 9004 9003" />
    
    <application plugin="snipetor" time="1800" arguments="target,relay1,exit1 60000 8002:9002:8004:9004 fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80 4uthority,relay2,exit2 8001:8003" />
    
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8005 9005" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8006 9006 9005" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8007 9007" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 8008 9008 9007" />
    
    <application plugin="snipetor" time="1800" arguments="target,relay1,exit1 60000 8006:9006:8008:9008 fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80,fileserver:80 4uthority,relay2,exit2 8005:8007" />
</node >

