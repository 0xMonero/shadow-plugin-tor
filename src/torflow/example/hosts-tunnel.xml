<cluster id="vnet" bandwidthdown="10240" bandwidthup="10240" />
<link clusters="vnet vnet" latency="60" jitter="20" packetloss="0.0" />

<plugin id="file" path="~/.shadow/plugins/libshadow-plugin-filetransfer.so" />
<plugin id="tor" path="~/.shadow/plugins/libshadow-plugin-scallion.so" />
<plugin id="snipetor" path="~/.shadow/plugins/libshadow-plugin-snipetor.so" />
<plugin id="torctl" path="~/.shadow/plugins/libshadow-plugin-torcontrol.so" />

<kill time="3600" />

<node id="fileserver" bandwidthdown="102400" bandwidthup="102400" >
    <application plugin="file" time="1" arguments="server 80 ~/.shadow/share/" />
</node >

<node id="4uthority" >
    <application plugin="tor" time="1" arguments="dirauth 1024 1024000 1024000 ./authority.torrc ./data/authoritydata ~/.shadow/share/geoip" />
    <application plugin="torctl" time="61" arguments="single localhost 9051 log STREAM,CIRC,CIRC_MINOR,BW,STREAM_BW" />
</node >
<node id="target" quantity="1" heartbeatloginfo="node,ram" loglevel="info" >
    <application plugin="tor" time="60" arguments="relay 1024 1024000 1024000 ./relay.torrc ./data/relaydata ~/.shadow/share/geoip" />
    <application plugin="torctl" time="61" arguments="single localhost 9051 log STREAM,CIRC,CIRC_MINOR,BW,STREAM_BW" />
</node>
<node id="exit" quantity="2" >
    <application plugin="tor" time="60" arguments="exitrelay 1024 1024000 1024000 ./exit.torrc ./data/exitdata ~/.shadow/share/geoip" />
    <application plugin="torctl" time="61" arguments="single localhost 9051 log STREAM,CIRC,CIRC_MINOR,BW,STREAM_BW" />
</node >
<node id="relay" quantity="2" >
    <application plugin="tor" time="60" arguments="relay 1024 1024000 1024000 ./relay.torrc ./data/relaydata ~/.shadow/share/geoip" />
    <application plugin="torctl" time="61" arguments="single localhost 9051 log STREAM,CIRC,CIRC_MINOR,BW,STREAM_BW" />
</node>

<node id="sniper" heartbeatloginfo="node,ram" loglevel="debug" >
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 7000 6000" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 7001 6001 6000" />
<!-- regular downloads through tunnel tor circuits
    <application plugin="file" starttime="1500" arguments="client single fileserver 80 localhost 9001 10 /50KiB.urnd"/>
-->
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 7002 6002" />
    <application plugin="tor" time="1500" arguments="client 1024 1024000 1024000 ./client.torrc ./data/clientdata ~/.shadow/share/geoip 7003 6003 6002" />
    <application plugin="snipetor" time="1800" arguments="target,relay1,exit1 60000 7001:6001:7003:6003 fileserver:80,fileserver:80 4uthority,relay2,exit2 7000:7002" />
</node >

